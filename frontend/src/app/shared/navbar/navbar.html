<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    
    <!-- Logo a la izquierda -->
    <a class="navbar-brand" href="#" (click)="irAlLogo(); $event.preventDefault()">
      <span class="logo-text">AutoVibes</span>
    </a>

    <!-- Toggle Button (Mobile) -->
    <button class="navbar-toggler" type="button" (click)="toggleMenu()" 
            [attr.aria-expanded]="isMenuOpen">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar Menu -->
    <div class="collapse navbar-collapse" [class.show]="isMenuOpen">
      <ul class="navbar-nav ms-auto">
        
        <!-- ========== NAVEGACIÃ“N CLIENTE (NO LOGUEADO) ========== -->
        <ng-container *ngIf="!authService.isLoggedIn()">
          <!-- BotÃ³n Iniciar SesiÃ³n -->
          <li class="nav-item">
            <button class="btn btn-login" (click)="irALogin()">
              Iniciar sesiÃ³n
            </button>
          </li>

          <!-- BotÃ³n Comprar con Dropdown -->
          <li class="nav-item dropdown">
            <button class="btn btn-comprar" 
                    (click)="toggleComprarDropdown(); $event.stopPropagation()"
                    [class.active]="isComprarDropdownOpen">
              Comprar
            </button>
            
            <!-- Dropdown Menu -->
            <div class="dropdown-menu" 
                 [class.show]="isComprarDropdownOpen"
                 (click)="$event.stopPropagation()">
              
              <!-- Header del dropdown -->
              <div class="dropdown-header">
                <span class="dropdown-icon">ðŸš—</span>
                <span class="dropdown-title">Autos</span>
                <span class="dropdown-arrow">â€º</span>
              </div>

              <!-- Opciones de condiciÃ³n -->
              <div class="dropdown-options">
                <div class="dropdown-option" 
                     *ngFor="let condicion of condiciones"
                     (click)="irACondicion(condicion.id)">
                  <div class="option-title">{{ condicion.nombre === 'NUEVO' ? 'Nuevos Okm' : condicion.nombre }}</div>
                  <div class="option-description">{{ getCondicionDescripcion(condicion.nombre) }}</div>
                  <span class="option-arrow">â€º</span>
                </div>
              </div>
            </div>
          </li>
        </ng-container>

        <!-- ========== NAVEGACIÃ“N CLIENTE LOGUEADO ========== -->
        <ng-container *ngIf="authService.isLoggedIn() && authService.isCliente()">
          <!-- BotÃ³n Iniciar SesiÃ³n (mostrar nombre del usuario) -->
          <li class="nav-item">
            <button class="btn btn-login" (click)="irAMiPerfil()">
              {{ currentUser?.nombre || 'Usuario' }}
            </button>
          </li>

          <!-- BotÃ³n Comprar con Dropdown -->
          <li class="nav-item dropdown">
            <button class="btn btn-comprar" 
                    (click)="toggleComprarDropdown(); $event.stopPropagation()"
                    [class.active]="isComprarDropdownOpen">
              Comprar
            </button>
            
            <!-- Dropdown Menu -->
            <div class="dropdown-menu" 
                 [class.show]="isComprarDropdownOpen"
                 (click)="$event.stopPropagation()">
              
              <!-- Header del dropdown -->
              <div class="dropdown-header">
                <span class="dropdown-icon">ðŸš—</span>
                <span class="dropdown-title">Autos</span>
                <span class="dropdown-arrow">â€º</span>
              </div>

              <!-- Opciones de condiciÃ³n -->
              <div class="dropdown-options">
                <div class="dropdown-option" 
                     *ngFor="let condicion of condiciones"
                     (click)="irACondicion(condicion.id)">
                  <div class="option-title">{{ condicion.nombre === 'NUEVO' ? 'Nuevos Okm' : condicion.nombre }}</div>
                  <div class="option-description">{{ getCondicionDescripcion(condicion.nombre) }}</div>
                  <span class="option-arrow">â€º</span>
                </div>
              </div>
            </div>
          </li>
        </ng-container>

        <!-- ========== NAVEGACIÃ“N ADMIN ========== -->
        <ng-container *ngIf="authService.isAdmin()">
      
          <!-- Separador visual -->
          <li class="nav-item">
            <span class="navbar-text mx-2">|</span>
          </li>

          <!-- âž• Agregar Auto -->
          <li class="nav-item">
            <a class="nav-link" href="#" (click)="irAAgregarAuto(); $event.preventDefault()">
              âž• Agregar Auto
            </a>
          </li>

          <!-- ðŸ‘¥ Usuarios -->
          <li class="nav-item">
            <a class="nav-link" href="#" (click)="irAUsuarios(); $event.preventDefault()">
              ðŸ‘¥ Usuarios
            </a>
          </li>

          <!-- ðŸ§¾ Ventas -->
          <li class="nav-item">
            <a class="nav-link" href="#" (click)="irAVentas(); $event.preventDefault()">
              ðŸ§¾ Ventas
            </a>
          </li>

          <!-- Separador visual -->
          <li class="nav-item">
            <span class="navbar-text mx-2">|</span>
          </li>

          <!-- INFO ADMIN -->
          <li class="nav-item me-3">
            <span class="navbar-text">
              <span class="badge bg-warning text-dark">ðŸ‘‘ ADMIN</span>
              <strong class="ms-2">{{ currentUser?.nombre }}</strong>
            </span>
          </li>

          <!-- ðŸšª Cerrar SesiÃ³n -->
          <li class="nav-item">
            <button class="btn btn-danger btn-sm" (click)="logout()">
              ðŸšª Cerrar SesiÃ³n
            </button>
          </li>
        </ng-container>

      </ul>
    </div>
  </div>
</nav>