<!-- Hero Section -->
<div class="hero-section" 
     style="background-image: url('https://images.unsplash.com/photo-1552820728-8ac41f1ce891?w=1200&h=400&fit=crop&q=80');">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1 class="hero-title">El Portal Oficial de Compra y Venta</h1>
    <h2 class="hero-subtitle">de Autos Nuevos y Usados en el PerÃº</h2>
  </div>
</div>

<!-- Filtros Section -->
<section class="filters-section py-5 bg-light">
  <div class="container">
    <div class="row g-3">
      <!-- Filtro Marca -->
      <div class="col-md-4">
        <label for="filtroMarca" class="form-label fw-bold">ğŸ·ï¸ Marca</label>
        <select class="form-select" id="filtroMarca" [(ngModel)]="filtroMarca">
          <option value="">-- Todas las marcas --</option>
          <option *ngFor="let marca of marcas" [value]="marca.id">
            {{ marca.nombre }}
          </option>
        </select>
      </div>

      <!-- Filtro CategorÃ­a -->
      <div class="col-md-4">
        <label for="filtroCategoria" class="form-label fw-bold">ğŸ“‚ CategorÃ­a</label>
        <select class="form-select" id="filtroCategoria" [(ngModel)]="filtroCategoria">
          <option value="">-- Todas las categorÃ­as --</option>
          <option *ngFor="let cat of categorias" [value]="cat.id">
            {{ cat.nombre }}
          </option>
        </select>
      </div>

      <!-- Buscador Modelo -->
      <div class="col-md-4">
        <label for="filtroModelo" class="form-label fw-bold">ğŸ” Modelo</label>
        <input type="text" class="form-control" id="filtroModelo" 
               [(ngModel)]="filtroModelo" 
               placeholder="Ej: Corolla, Civic, Duster...">
      </div>
    </div>

    <!-- Botones -->
    <div class="row mt-4">
      <div class="col-md-12 text-center">
        <button class="btn btn-primary btn-lg me-2" (click)="buscar()">
          ğŸ” Buscar Autos
        </button>
        <button class="btn btn-secondary btn-lg" (click)="limpiarFiltros()">
          ğŸ”„ Limpiar Filtros
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Loading -->
<div class="text-center py-5" *ngIf="loading">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Cargando...</span>
  </div>
  <p class="mt-3 text-muted">Cargando autos disponibles...</p>
</div>

<!-- Error -->
<div class="alert alert-danger mt-4" *ngIf="error" role="alert">
  âŒ {{ error }}
</div>

<!-- Autos Grid -->
<section class="autos-section py-5">
  <div class="container">
    <h3 class="mb-4 fw-bold">
      ğŸš— Autos Disponibles ({{ autosFilterrados.length }})
    </h3>

    <div class="row g-4">
      <!-- Auto Card -->
      <div class="col-md-6 col-lg-4" *ngFor="let auto of autosFilterrados">
        <div class="card auto-card h-100 shadow-sm hover-card">
          <!-- Imagen -->
          <div class="auto-image-container bg-light">
            <img [src]="auto.imagenes?.[0] || 'https://via.placeholder.com/400x250?text=Auto'" 
                 [alt]="auto.modelo" 
                 class="card-img-top auto-image">
            <span class="badge bg-success position-absolute top-0 end-0 m-2">
              âœ… Disponible
            </span>
          </div>

          <!-- Contenido -->
          <div class="card-body">
            <!-- TÃ­tulo -->
            <h5 class="card-title fw-bold">
              {{ auto.marca?.nombre }} {{ auto.modelo }}
            </h5>

            <!-- AÃ±o y CondiciÃ³n -->
            <div class="mb-2">
              <small class="text-muted">
                ğŸ“… {{ auto.anio }} Â· 
                <span class="badge bg-info">{{ auto.condicion?.nombre }}</span>
              </small>
            </div>

            <!-- Specs -->
            <ul class="list-unstyled small text-muted">
              <li>ğŸ›£ï¸ {{ auto.kilometraje | number }} km</li>
              <li>â›½ {{ auto.combustible?.nombre }}</li>
              <li>ğŸ”§ {{ auto.transmision?.nombre }}</li>
              <li>ğŸ¨ Color: {{ auto.color }}</li>
            </ul>

            <!-- DescripciÃ³n -->
            <p class="card-text small">{{ auto.descripcion }}</p>

            <!-- Precio -->
            <div class="price-section mb-3">
              <h4 class="text-danger fw-bold">
                S/ {{ auto.precio | number:'1.2-2' }}
              </h4>
            </div>
          </div>

          <!-- Footer -->
          <div class="card-footer bg-white border-top">
            <div class="btn-group w-100" role="group">
              <button class="btn btn-outline-primary btn-sm flex-grow-1" 
                      (click)="verDetalles(auto.id)">
                ğŸ‘ï¸ Ver Detalles
              </button>
              <button class="btn btn-primary btn-sm flex-grow-1" 
                      (click)="contactarVendedor(auto)">
                ğŸ’¬ Contactar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Sin resultados -->
      <div class="col-12 text-center py-5" *ngIf="autosFilterrados.length === 0 && !loading">
        <h5 class="text-muted">ğŸ˜ No hay autos que coincidan con tu bÃºsqueda</h5>
        <button class="btn btn-primary mt-3" (click)="limpiarFiltros()">
          ğŸ”„ Limpiar filtros
        </button>
      </div>
    </div>
  </div>
</section>